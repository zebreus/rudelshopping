<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rudelshopping</title>
    <style>
      @font-face {
        font-family: krypton;
        src: url(./fonts/MonaspaceKrypton-Regular.woff2);
      }

      body {
        margin: 0;
        padding: 0;
        background-color: #333;
        color: #f7a8b8;
        /* Pink color for text */
        font-size: 18px;
        font-family: krypton;
        /* Adjust the font size as needed */
      }

      .pride-flag {
        display: flex;
        height: 20px;
      }

      .pride-flag div {
        flex: 1;
      }

      .pride-flag .red {
        background-color: #ff0000;
      }

      .pride-flag .orange {
        background-color: #ff8c00;
      }

      .pride-flag .yellow {
        background-color: #ffff00;
      }

      .pride-flag .green {
        background-color: #008000;
      }

      .pride-flag .blue {
        background-color: #0000ff;
      }

      .pride-flag .purple {
        background-color: #800080;
      }

      header {
        background-color: #333;
        color: #f7a8b8;
        /* Pink color for header text */
        padding: 1rem 0;
        text-align: center;
      }

      nav {
        display: block;
        background-color: #555;
      }

      .container {
        padding: 2rem;
      }

      a {
        color: #55cdfc;
        /* Light blue color for links */
      }

      #order-form {
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
      }

      fieldset {
        display: flex;
        justify-content: flex-end;
        flex-direction: column;
        gap: 0.2rem;
        padding-block: 0.3rem 0.65rem;
      }

      input[type="text"],
      input[type="email"],
      input[type="number"],
      textarea,
      select {
        background-color: #333333;
        border-style: solid;
        border-color: #555555; /* Subtle border for differentiation */
        color: #ffffff; /* White text to match the dark background */
        border-radius: 0px; /* Rounded edges for modern look */
        padding: 4px; /* Comfortable padding for readability */
        font-family: "krypton", monospace; /* Match the site's font style */
        font-size: 16px;
        width: 60px;
        border-width: 2px;
      }

      textarea {
        width: 100%;
      }

      form > * {
        margin-bottom: 1rem;
      }

      form p {
        margin-block: 0.5rem;
      }

      input[type="number"] {
        width: 60px;
      }
      input[type="text"],
      input[type="email"] {
        width: auto;
      }

      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
      }

      input[type="text"]:focus,
      input[type="email"]:focus,
      input[type="number"]:focus,
      textarea:focus,
      select:focus,
      input[type="radio"]:focus {
        border-style: groove;
        border-width: 2px;
        border-color: ButtonFace;
        outline: none;
      }

      label:has(
        input[type="number"], input[type="text"], input[type="email"]
      ) {
        display: flex;
        align-items: center;

        > input {
          margin-inline-start: 0.5rem;
        }
      }

      input[type="radio"] {
        -webkit-appearance: none;
        appearance: none;
        background-color: var(--form-background);
        margin: 0;

        font: inherit;
        color: currentColor;
        width: 1.15em;
        height: 1.15em;
        border-style: solid;
        border-width: 2px;
        border-color: #555555;
        transform: translateY(-0.075em);

        display: inline-grid;
        place-content: center;
      }

      input[type="radio"]::before {
        content: "";
        width: 0.65em;
        height: 0.65em;
        /* border-radius: 50%; */
        transform: scale(0);
        transition: 120ms transform ease-in-out;
      }
      input[type="radio"]:checked::before {
        transform: scale(1);
      }

      #shippingRadio::before {
        background-color: red;
      }
      #w17Radio::before {
        background-color: orange;
      }
      #easterheggRadio::before {
        background-color: yellow;
      }
      #gpnRadio::before {
        background-color: green;
      }
      #noCashRadio::before {
        background-color: blue;
      }
      #cashRadio::before {
        background-color: purple;
      }

      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
      }

      form button {
        position: relative;
        background-color: ButtonFace; /* Bright button to stand out */
        /* border: none; */ /* Remove default border */
        color: #333333; /* Contrasting text color */
        font-family: "krypton"; /* Match font */
        font-size: 16px; /* Slightly larger font for buttons */
        padding: 10px 20px; /* Comfortable padding */
        /* border-radius: 5px; */ /* Rounded edges for modern look */
        cursor: pointer; /* Pointer cursor for interactive elements */
        transition:
          background-color 0.5s,
          box-shadow 0.5s; /* Smooth hover effect */
        width: 100%;
      }

      @keyframes a {
        to {
          background-position: -200% 0;
        }
      }

      button::after {
        content: "Preorder now";
        z-index: 6;
        position: absolute;
        inset: 0px;
        font-family: "krypton";
        font-size: 16px;
        padding: 10px 20px;
        background: linear-gradient(
          90deg,
          rgba(255, 0, 0, 1) 0%,
          rgba(255, 154, 0, 1) 10%,
          rgba(208, 222, 33, 1) 20%,
          rgba(79, 220, 74, 1) 30%,
          rgba(63, 218, 216, 1) 40%,
          rgba(47, 201, 226, 1) 50%,
          rgba(28, 127, 238, 1) 60%,
          rgba(95, 21, 242, 1) 70%,
          rgba(186, 12, 248, 1) 80%,
          rgba(251, 7, 217, 1) 90%,
          rgba(255, 0, 0, 1) 100%
        ) 0 0/200% 200%;
        transition: opacity 1.0s; /* Smooth hover effect */
        opacity: 0.01;
      }

      button:focus {
        outline: none;
      }

      button::before {
        content: " dd";
        z-index: -2;
        position: absolute;
        inset: -4px;
        background: linear-gradient(
          90deg,
          rgba(255, 0, 0, 1) 0%,
          rgba(255, 154, 0, 1) 10%,
          rgba(208, 222, 33, 1) 20%,
          rgba(79, 220, 74, 1) 30%,
          rgba(63, 218, 216, 1) 40%,
          rgba(47, 201, 226, 1) 50%,
          rgba(28, 127, 238, 1) 60%,
          rgba(95, 21, 242, 1) 70%,
          rgba(186, 12, 248, 1) 80%,
          rgba(251, 7, 217, 1) 90%,
          rgba(255, 0, 0, 1) 100%
        ) 0 0/200% 200%;
        animation: a 12s linear infinite;
        filter: blur(8px);
        opacity: 0.01;
        transition: opacity 0.3s; /* Smooth hover effect */
        animation: none;
      }

      button:hover::after,
      button:focus::after {
        animation: a 15s linear infinite;
        opacity: 0.8;
      }

      button:hover::before,
      button:focus::before {
        animation: a 12s linear infinite;
        opacity: 1;
      }
    </style>
  </head>

  <body>
    <div class="pride-flag">
      <div class="red"></div>
      <div class="orange"></div>
      <div class="yellow"></div>
      <div class="green"></div>
      <div class="blue"></div>
      <div class="purple"></div>
    </div>
    <div class="trans-flag">
      <div class="blue"></div>
      <div class="pink"></div>
      <div class="white"></div>
      <div class="pink"></div>
      <div class="blue"></div>
    </div>
    <header>
      <h1>Rudelblinken Webshop</h1>
    </header>

    <div class="container">
      <p>
        Here you can preorder the brand new
        <a href="https://oshwlab.com/zebreus/rudelblinken"
        >Rudelblinken Delta</a>, the best RGB* Catears ever made!
      </p>
      <p>
        We will be ordering the next batch around late february. Production
        costs are expected to be around 4€ per board. 6€ for the full kit
        including 3d printed cat-ears and a randomly colored LED strip.
      </p>
      <p>
        To keep updated on the current status join the <a
          href="https://matrix.to/#/#rudelblinken:zebre.us"
        >Rudelblinken matrix room</a>
      </p>
      <form id="order-form" action="/submit-order" method="post">
        <h2>Order Form</h2>

        <fieldset>
          <legend>Products</legend>
          <fieldset>
            <legend>PCB Only</legend>
            <p>
              Only the assembled board, no 3d printed parts or LED strip.
            </p>
            <label>
              Quantity: <input
                type="number"
                id="pcbOnlyQuantity"
                name="pcbOnlyQuantity"
                min="0"
                step="1"
                max="999"
                placeholder="0"
              />
            </label>

            <label>Price: <input
                type="number"
                id="pcbOnlyPrice"
                name="pcbOnlyPrice"
                min="4"
                step="0.01"
                placeholder="7"
                value="7"
              />€</label>
          </fieldset>

          <fieldset>
            <legend>Full kit</legend>
            <p>
              The full kit including 3d printed cat-ears and a randomly colored
              LED strip. If you want a specific color, please write it in the
              notes.
            </p>
            <label>
              Quantity: <input
                type="number"
                id="fullKitQuantity"
                name="fullKitQuantity"
                min="0"
                step="1"
                max="999"
                placeholder="0"
              />
            </label>

            <label>Price:
              <input
                type="number"
                id="fullKitPrice"
                name="fullKitPrice"
                min="4"
                step="0.01"
                placeholder="9"
                value="9"
              />€</label>
          </fieldset>
        </fieldset>

        <fieldset>
          <legend>Delivery</legend>

          <p>
            We offer shipping and pickup at various events.
          </p>

          <label>
            <input
              id="shippingRadio"
              type="radio"
              name="deliveryMethod"
              value="shipping"
              checked
              required
            />
            Shipping (4.20€)
          </label>

          <label>
            <input
              id="w17Radio"
              type="radio"
              name="deliveryMethod"
              value="w17"
              required
            />
            Pickup in Darmstadt
          </label>
          <label>
            <input
              id="easterheggRadio"
              type="radio"
              name="deliveryMethod"
              value="easterhegg"
              required
            />
            Pickup at Easterhegg
          </label>
          <label>
            <input
              id="gpnRadio"
              type="radio"
              name="deliveryMethod"
              value="gpn"
              required
            />
            Pickup at GPN
          </label>
        </fieldset>

        <fieldset>
          <legend>Payment</legend>

          <label>
            <input
              id="noCashRadio"
              type="radio"
              name="paymentMethod"
              value="stripe"
              checked
              required
            />
            Online Payment
          </label>

          <label>
            <input
              id="cashRadio"
              type="radio"
              name="paymentMethod"
              value="cash"
              required
            />
            Cash (Only for pickup orders)
          </label>
        </fieldset>

        <fieldset>
          <legend>Information</legend>

          <label>
            Your name:
            <input
              type="text"
              name="name"
              id="name"
              placeholder="xX_H4x0r_1337_Xx"
              required
            >
          </label>

          <label>
            Your email:
            <input
              type="email"
              name="email"
              id="email"
              placeholder="creature@example.com"
              required
            >
          </label>

          <label>
            Notes:
            <textarea
              name="notes"
              id="notes"
              placeholder="If you want to tell me anything else, write it here."
            ></textarea>
          </label>
        </fieldset>

        <button type="submit">Preorder now</button>
      </form>

      <script>
        // Form validation

        const pcbOnlyQuantity = document.getElementById(
          "pcbOnlyQuantity",
        );
        const pcbOnlyPrice = document.getElementById(
          "pcbOnlyPrice",
        );
        const fullKitQuantity = document.getElementById(
          "fullKitQuantity",
        );
        const fullKitPrice = document.getElementById(
          "fullKitPrice",
        );
        const notes = document.getElementById("notes");
        const email = document.getElementById("email");
        const name = document.getElementById("name");
        const cashRadio = document.getElementById("cashRadio");
        const noCashRadio = document.getElementById("noCashRadio");
        const shippingRadio = document.getElementById(
          "shippingRadio",
        );
        const w17Radio = document.getElementById("w17Radio");
        const easterheggRadio = document.getElementById(
          "easterheggRadio",
        );
        const gpnRadio = document.getElementById("gpnRadio");

        // Assert a valid email
        email.addEventListener("input", (event) => {
          if (email.validity.typeMismatch) {
            email.setCustomValidity(
              "I am expecting an email address!",
            );
          } else {
            email.setCustomValidity("");
          }
        });

        // Assert that more than 1 item is ordered
        const checkQuantity = () => {
          const pcbOnly = pcbOnlyQuantity.value || 0;
          const fullKit = fullKitQuantity.value || 0;
          const orderQuantity = parseInt(pcbOnly) + parseInt(fullKit);
          if (orderQuantity <= 0) {
            pcbOnlyQuantity.setCustomValidity(
              "You need to order at least one item",
            );
            fullKitQuantity.setCustomValidity(
              "You need to order at least one item",
            );
          } else {
            pcbOnlyQuantity.setCustomValidity("");
            fullKitQuantity.setCustomValidity("");
          }
        };
        pcbOnlyQuantity.addEventListener("input", checkQuantity);
        fullKitQuantity.addEventListener("input", checkQuantity);
        checkQuantity();

        // Assert that cash is only selected for pickup
        const checkPaymentMethod = () => {
          if (cashRadio.checked && shippingRadio.checked) {
            cashRadio.setCustomValidity(
              "You can only pay cash if you pick up your order",
            );
            shippingRadio.setCustomValidity(
              "Shipping is only possible with online payment",
            );
          } else {
            cashRadio.setCustomValidity("");
            shippingRadio.setCustomValidity("");
          }
        };
        cashRadio.addEventListener("input", checkPaymentMethod);
        noCashRadio.addEventListener("input", checkPaymentMethod);
        shippingRadio.addEventListener("input", checkPaymentMethod);
        w17Radio.addEventListener("input", checkPaymentMethod);
        easterheggRadio.addEventListener("input", checkPaymentMethod);
        gpnRadio.addEventListener("input", checkPaymentMethod);
        checkPaymentMethod();

        const checkPcbOnlyPrice = (event) => {
          const pcbOnlyQuant = pcbOnlyQuantity.value || 0;
          if (
            parseFloat(pcbOnlyPrice.value) < 4 && pcbOnlyQuant > 0
          ) {
            pcbOnlyPrice.setCustomValidity(
              "Please enter a price that is higher than the production cost (4€). If that doesn't work for you, write me an email.",
            );
          } else {
            pcbOnlyPrice.setCustomValidity("");
          }
        };
        pcbOnlyPrice.addEventListener("input", checkPcbOnlyPrice);
        checkPcbOnlyPrice();

        const checkFullKitPrice = (event) => {
          const fullKitQuant = fullKitQuantity.value || 0;
          if (
            parseFloat(fullKitPrice.value) < 6 && fullKitQuant > 0
          ) {
            fullKitPrice.setCustomValidity(
              "Please enter a price that is higher than the production cost (4€). If that doesn't work for you, write me an email.",
            );
          } else {
            fullKitPrice.setCustomValidity("");
          }
        };
        fullKitPrice.addEventListener("input", checkFullKitPrice);
        checkFullKitPrice();
      </script>

      <p>
        RGB stands for Really Good Blinkenlights. We also offer them in a
        variety of colors, but a single rudelblinken is just a single color.
      </p>
    </div>
  </body>
</html>
